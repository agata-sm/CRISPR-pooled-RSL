profiles {

	standard {
		process.executor = 'local'
	}

	cluster {

		process {
			withLabel: big_mem {
				executor = 'slurm'
				process.scratch = true
				process.errorStrategy = 'retry'
				process.maxRetries = 1
				clusterOptions = {"-A $params.project"}
				cpus = { 8 * task.attempt }
				memory = { 52.GB * task.attempt }
				queue = 'core'
				time = { 3.h * task.attempt }
			}
			withLabel: mid_mem {
				executor = 'slurm'
				process.scratch = true
				process.errorStrategy = 'retry'
				process.maxRetries = 1
				clusterOptions = {"-A $params.project"}
				cpus = { 4 * task.attempt }
				queue = 'core'
				time = { 3.h * task.attempt }
			}
			withLabel: small {
				executor = 'slurm'
				process.scratch = true
				process.errorStrategy = 'retry'
				process.maxRetries = 1
				clusterOptions = {"-A $params.project"}
				cpus = { 1 * task.attempt }
				queue = 'core'
				time = { 1.h * task.attempt }
			}

		}

	}


    singularity {
        process.executor = 'slurm'
        process.container = 'cbcrg/imagex' //// NNNN
        docker.enabled = false
        singularity.enabled = true

    }

}


// software paths
params.crisprcounterpath="/proj/sllstore2017103/nbis5351/For_NBIS" // path to executable CrisprCounter.jar
